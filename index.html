<html>
	<head>
		<style>
		canvas
		{
			background: #eee;
			position:absolute;
			top:2%;
			left:18%;
		}
		font
		{
			font-size: 8em;
		}
		</style>
	</head>
	<body>
		<img id="dirt" src="https://i.ibb.co/YkYgTRc/haha.png" />
		<canvas id="Canvas" width="900" height="600" />
		<script>
			var canvas = document.getElementById("Canvas");
			var ctx = canvas.getContext("2d");
			var imgs = [];
			imgs[0] = document.getElementById("dirt");
			var keyPressed = {}
			var barWi = 18;
			var barHi = 5;
			var barrier = [];
			//////////////
			//OBJECT OUT//
			//////////////
			for (iteration=0;iteration<barHi;iteration++)
			{
				barrier[iteration] = [];
				for (iteration2=0;iteration2<barWi;iteration2++)
				{
					(barrier[iteration])[iteration2] = new function()
					{
						this.countHi = iteration;
						this.countWi = iteration2;
						this.height = 45;
						this.width = 45;
						this.collideVar = null;
						this.initialize = function()
						{
							this.x = 22.5+(iteration2*(this.height-1));
							this.y = 405+(iteration*(this.width-1));
							if (Math.random() > 0.5)
							{
								this.color = "#0095DD";
							}
							else
							{
								this.color = "#FF2B4A";
							}
						}
						this.getcollide = function()
						{
							NaN;
						}
						this.draw = function()
						{
							ctx.beginPath();
							ctx.drawImage(imgs[0],this.x-(this.width/2),this.y-(this.height/2));
							ctx.fillStyle = this.color;
							ctx.fill();
							ctx.closePath();
						}
					}
				}
			}
			var character = new function()
			{
				this.upForce = 0;
				this.downForce = 0;
				this.height = 60;
				this.width = 30;
				this.fallingVar = 0;
				this.collideVar = null;
				this.x = (canvas.height/2)+(this.width/2);
				this.y = (canvas.width/2)-300;
				this.draw = function()
				{
					ctx.beginPath();
					ctx.rect(this.x-(this.width/2),this.y-(this.height/2),this.width,this.height);
					ctx.fillStyle = "#141012";
					ctx.fill();
					ctx.closePath();
				}
				this.updating = function()
				{
					if (this.fallingVar != 0)
					{
						this.fallingVar -= 1;
					}
					if ((this.fallingVar == 0) && (this.downForce == 0))
					{
						this.downForce = 0.3;
					}
					if (this.fallingVar == 0)
					{
						this.downForce *= 1.01;
					}
				}
				this.getXcollide = function()
				{
					NaN;
				}
				this.getYcollide = function()
				{
					NaN;
				}
				this.getcollide = function()
				{
					this.downForce = 0;
					this.upForce = 0;
					this.fallingVar = 5;
				}
				this.controlling = function()
				{
					if (keyPressed["d"])
					{
						if ((this.x + (this.width/2)) < 900)
						{
							this.x += 1.2;
						}
					}
					if (keyPressed["a"])
					{
						if ((this.x - (this.width/2)) > 0)
						{
							this.x -= 1.2;
						}
					}
					if (keyPressed["s"])
					{
						NaN;
					}
					if (keyPressed[" "])
					{
						if ((this.x + (this.width/2)) < 900)
						{
							if (this.upForce <= 1.5)
							{
								this.upForce += 0.5;
							}
						}
					}
				}
				this.befall = function()
				{
					this.y -= this.upForce;
					this.y += this.downForce;
				}
			}
			/////////////////
			//key detecting//
			/////////////////
			function keyDownHandler(e) 
			{
				keyPressed[e.key] = true;
			}
			function keyUpHandler(e)
			{
				keyPressed[e.key] = false;
			}
			function LOL(e)
			{
				console.log(e);
			}
			document.addEventListener("keydown", keyDownHandler, false);
			document.addEventListener("keyup", keyUpHandler, false);
			document.addEventListener("mousedown", LOL, false);
			/////////////////////////
			//ez collide idenifying//
			/////////////////////////
			function collide(object,getHurt)
            {
				let Xcondition = ((object.x+(object.width/2) > getHurt.x-(getHurt.width/2)) && (object.x-(object.width/2) < getHurt.x+(getHurt.width/2)));
				let Ycondition = ((object.y+(object.height/2) > getHurt.y-(getHurt.height/2)) && (object.y-(object.height/2) < getHurt.y+(getHurt.height/2)));
				if (Xcondition)
				{
					getHurt.collideVar -= 1;
				}
				if (Ycondition)
				{
					getHurt.collideVar += 1;
				}
				if (!((Xcondition) || (Ycondition)))
				{
					getHurt.collideVar = null;
				}
				else if ((Xcondition) && (Ycondition))
				{
					object.getcollide();
					if (getHurt.collideVar > 0)
					{
						object.getXcollide();
					}
					if (getHurt.collideVar < 0)
					{
						object.getYcollide();
					}
					getHurt.collideVar = null;
				}
            }
			
			for (iteration=0;iteration<barHi;iteration++)
			{
				for (iteration2 = 0;iteration2 < barWi;iteration2++)
				{
					(barrier[iteration][iteration2]).initialize();
				}
			}
			


			function rendering() 
			{
				ctx.clearRect(0, 0, canvas.width, canvas.height);
				for (iteration=0;iteration<barHi;iteration++)
				{
					for (iteration2 = 0;iteration2 < barWi;iteration2++)
					{
						if ((barrier[iteration])[iteration2] == null)
						{
							NaN;
						}
						else
						{
							(barrier[iteration])[iteration2].draw();
							collide(character,(barrier[iteration])[iteration2]);
						}
					}
				}
				character.controlling();
				character.draw();
				character.updating();
				character.befall();
			}
			
			setInterval("rendering()", 2);
		</script>
	</body>
</html>